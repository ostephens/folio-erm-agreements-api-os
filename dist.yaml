openapi: 3.0.0
info:
  version: 0.0.2
  title: Folio ERM Agreements
  description: API for the Folio library services platform mod-agreements app
servers:
  - url: 'http://localhost:9130'
  - url: 'https://folio-snapshot-okapi.dev.folio.org'
  - url: 'https://folio-testing-okapi.dev.folio.org'
paths:
  '/erm/{entityType}':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/entityType'
    get:
      summary: Returns list of specified entities
      parameters:
        - $ref: '#/components/parameters/filters'
        - $ref: '#/components/parameters/match'
        - $ref: '#/components/parameters/term'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/stats'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/offset'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Results'
                  - $ref: '#/components/schemas/ResultsArray'
    post:
      summary: Create Entity of specified type
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Entity'
      responses:
        '201':
          description: Success. Entity created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Entity'
        '404':
          description: Not found. Not possible to POST entity type
          content:
            text/plain:
              schema:
                type: string
        '422':
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationError'
  '/erm/{entityType}/{entityUUID}':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/entityType'
      - $ref: '#/components/parameters/entityUUID'
    get:
      summary: Returns specified entity
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Entity'
        '404':
          description: Entity UUID not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HttpError'
    put:
      summary: Update an existing Entity
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Entity'
    delete:
      summary: Delete an Entity
      responses:
        '204':
          description: Success
  /erm/files:
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
    post:
      summary: Upload file
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                name:
                  type: string
                filename:
                  type: string
                  format: binary
      responses:
        '201':
          description: File uploaded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/File'
  '/erm/files/{fileUUID}':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/fileUUID'
    get:
      summary: Get file description
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/File'
  '/erm/files/{fileUUID}/raw':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/fileUUID'
    get:
      summary: Download file
      responses:
        '200':
          description: Success
  '/erm/jobs/{jobType}':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/jobType'
    post:
      summary: Create job of specified type
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Job'
  '/erm/jobs/type/{jobType}':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/jobType'
    get:
      summary: Returns list of jobs with specified type
      parameters:
        - $ref: '#/components/parameters/filters'
        - $ref: '#/components/parameters/match'
        - $ref: '#/components/parameters/term'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/stats'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/offset'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Results'
                  - $ref: '#/components/schemas/ResultsArray'
  '/erm/jobs/{jobUUID}/{logType}':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/jobUUID'
      - $ref: '#/components/parameters/logType'
    get:
      summary: Get log for a job
      parameters:
        - $ref: '#/components/parameters/filters'
        - $ref: '#/components/parameters/match'
        - $ref: '#/components/parameters/term'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/stats'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/offset'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Results'
                  - $ref: '#/components/schemas/ResultsArray'
  '/erm/jobs/{jobUUID}/downloadFileObject':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/jobUUID'
    get:
      summary: Download a file created by the specified job
      responses:
        '200':
          description: Success
  '/erm/packages/{packageUUID}/content/all':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/packageUUID'
    get:
      summary: >-
        Returns all resources in the internal KB associated with a particular
        package
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Results'
                  - $ref: '#/components/schemas/ResultsArray'
  '/erm/packages/{packageUUID}/content/current':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/packageUUID'
    get:
      summary: >-
        Returns resources in the internal KB associated with a particular
        package part of the package on the current date
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Results'
                  - $ref: '#/components/schemas/ResultsArray'
  '/erm/packages/{packageUUID}/content/future':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/packageUUID'
    get:
      summary: >-
        Returns resources in the internal KB associated with a particular
        package which will become part of the package in the future
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Results'
                  - $ref: '#/components/schemas/ResultsArray'
  '/erm/packages/{packageUUID}/content/dropped':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/packageUUID'
    get:
      summary: >-
        Returns resources in the internal KB associated with a particular
        package which were part of the package in the past
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Results'
                  - $ref: '#/components/schemas/ResultsArray'
  '/erm/refdata/{domain}/{property}':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - in: path
        name: domain
        required: true
        schema:
          type: string
      - in: path
        name: property
        required: true
        schema:
          type: string
    get:
      summary: Returns list of reference data values for specified domain/property
      parameters:
        - $ref: '#/components/parameters/filters'
        - $ref: '#/components/parameters/match'
        - $ref: '#/components/parameters/term'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/stats'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/offset'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Results'
                  - $ref: '#/components/schemas/ResultsArray'
  /erm/resource/electronic:
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
    get:
      summary: Returns list of electronic resources (titles and packages)
      parameters:
        - $ref: '#/components/parameters/filters'
        - $ref: '#/components/parameters/match'
        - $ref: '#/components/parameters/term'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/stats'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/offset'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Results'
                  - $ref: '#/components/schemas/ResultsArray'
  '/erm/resource/{resourceUUID}/entitlements':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/resourceUUID'
    get:
      summary: >-
        Returns list of entitlements (agreement lines) which include the
        resource directly or indirectly (e.g. as part of a package)
      parameters:
        - $ref: '#/components/parameters/filters'
        - $ref: '#/components/parameters/match'
        - $ref: '#/components/parameters/term'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/stats'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/offset'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Results'
                  - $ref: '#/components/schemas/ResultsArray'
  '/erm/resource/{resourceUUID}/entitlements/related':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/resourceUUID'
    get:
      summary: >-
        Returns list of entitlements (agreement lines) which offer access to the
        same title as the specified resource but on other platform-package
        combinations. Will return 404 for any resources other than PCIs and PTIs
      parameters:
        - $ref: '#/components/parameters/filters'
        - $ref: '#/components/parameters/match'
        - $ref: '#/components/parameters/term'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/stats'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/offset'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Results'
                  - $ref: '#/components/schemas/ResultsArray'
        '404':
          description: Not available. Failed to find PCI or PTI with specific UUID
  '/erm/resource/{resourceUUID}/entitlementOptions':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/resourceUUID'
    get:
      summary: >-
        Returns list of entitlement options (ways of acquiring) the specified
        resource
      parameters:
        - $ref: '#/components/parameters/filters'
        - $ref: '#/components/parameters/match'
        - $ref: '#/components/parameters/term'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/stats'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/offset'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Results'
                  - $ref: '#/components/schemas/ResultsArray'
  '/erm/sas/{agreementUUID}/clone':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/agreementUUID'
    post:
      summary: Clones (makes a duplicate) of the specified agreement
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Agreement'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Agreement'
        '422':
          description: Unprocessable entity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationError'
  '/erm/sas/{agreementUUID}/export':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/agreementUUID'
    get:
      summary: >-
        Export the specified agreement as JSON including all resources in the
        internal KB associated with specified agreement
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Agreement'
  '/erm/sas/{agreementUUID}/export/current':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/agreementUUID'
    get:
      summary: >-
        Export the specified agreement as JSON including all resources in the
        internal KB associated with specified agreement actively part of the
        agreement on the current date
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Agreement'
  '/erm/sas/{agreementUUID}/resources/all':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/agreementUUID'
    get:
      summary: >-
        Returns all resources in the internal KB associated with specified
        agreement
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Results'
                  - $ref: '#/components/schemas/ResultsArray'
  '/erm/sas/{agreementUUID}/resources/current':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/agreementUUID'
    get:
      summary: >-
        Returns resources in the internal KB associated with specified agreement
        actively part of the agreement on the current date
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Results'
                  - $ref: '#/components/schemas/ResultsArray'
  '/erm/sas/{agreementUUID}/resources/future':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/agreementUUID'
    get:
      summary: >-
        Returns resources in the internal KB associated with specified agreement
        which will become actively part of the agreement in the future
      responses:
        '200':
          description: Success
          content:
            aapplication/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Results'
                  - $ref: '#/components/schemas/ResultsArray'
  '/erm/sas/{agreementUUID}/resources/dropped':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/agreementUUID'
    get:
      summary: >-
        Returns resources in the internal KB associated with specified agreement
        which were actively part of the agreement in the past
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Results'
                  - $ref: '#/components/schemas/ResultsArray'
  '/erm/sas/{agreementUUID}/resources/export':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/agreementUUID'
    get:
      summary: >-
        Export a list of all resources in the internal KB associated with
        specified agreement as JSON
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/resourcesInAgreementExport'
  '/erm/sas/{agreementUUID}/resources/export/current':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/agreementUUID'
    get:
      summary: >-
        Export a list of all resources in the internal KB associated with
        specified agreement actively part of the agreement on the current date
        as JSON
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/resourcesInAgreementExport'
  '/erm/sas/{agreementUUID}/resources/export/{downloadFormat}':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/agreementUUID'
      - $ref: '#/components/parameters/downloadFormat'
    get:
      summary: >-
        Export a list of all resources in the internal KB associated with
        specified agreement using the specified format
      responses:
        '200':
          description: Success
  '/erm/sas/{agreementUUID}/resources/export/current/{downloadFormat}':
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
      - $ref: '#/components/parameters/agreementUUID'
      - $ref: '#/components/parameters/downloadFormat'
    get:
      summary: >-
        Export a list of all resources in the internal KB associated with
        specified agreement actively part of the agreement on the current date
        using the specified format
      responses:
        '200':
          description: Success
  /erm/validate/subscriptionAgreement/name:
    parameters:
      - $ref: '#/components/parameters/x-okapi-tenant'
      - $ref: '#/components/parameters/x-okapi-token'
    post:
      summary: Validate a name for an agreement
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
      responses:
        '422':
          description: Unprocessable entity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationError'
components:
  parameters:
    x-okapi-tenant:
      in: header
      name: x-okapi-tenant
      required: true
      schema:
        type: string
    x-okapi-token:
      in: header
      name: x-okapi-token
      required: true
      schema:
        type: string
    entityType:
      in: path
      name: entityType
      required: true
      schema:
        type: string
        enum:
          - contacts
          - custprops
          - entitlements
          - jobs
          - kbs
          - org
          - packages
          - pci
          - pti
          - platforms
          - refdata
          - sas
          - sts
          - titles
    filters:
      in: query
      name: filters
      required: false
      schema:
        type: string
    match:
      in: query
      name: match
      required: false
      schema:
        type: string
    term:
      in: query
      name: term
      required: false
      schema:
        type: string
    sort:
      in: query
      name: sort
      required: false
      schema:
        type: string
    stats:
      in: query
      name: stats
      required: false
      schema:
        type: boolean
    perPage:
      in: query
      name: perPage
      required: false
      schema:
        type: integer
    offset:
      in: query
      name: offset
      required: false
      schema:
        type: integer
    entityUUID:
      in: path
      name: entityUUID
      description: UUID for an Entity
      required: true
      schema:
        type: string
        format: uuid
    fileUUID:
      in: path
      name: fileUUID
      description: UUID for a file
      required: true
      schema:
        type: string
        format: uuid
    jobType:
      in: path
      name: jobType
      required: true
      schema:
        type: string
        enum:
          - comparison
          - coverageRegeneration
          - packageImport
          - kbartImport
          - packageIngest
          - supplementaryDocumentsCleaning
    jobUUID:
      in: path
      name: jobUUID
      required: true
      schema:
        type: string
        format: uuid
    logType:
      in: path
      name: logType
      description: The type of log
      required: true
      schema:
        type: string
        enum:
          - infoLog
          - errorLog
          - fullLog
    packageUUID:
      in: path
      name: packageUUID
      description: UUID for a Package
      required: true
      schema:
        type: string
        format: uuid
    resourceUUID:
      in: path
      name: resourceUUID
      description: UUID for a Resource
      required: true
      schema:
        type: string
        format: uuid
    agreementUUID:
      in: path
      name: agreementUUID
      description: UUID for an Agreement
      required: true
      schema:
        type: string
        format: uuid
    downloadFormat:
      in: path
      name: downloadFormat
      required: true
      schema:
        type: string
        enum:
          - kbart
  schemas:
    RefData:
      type: object
      properties:
        id:
          type: string
          format: uuid
        label:
          type: string
        value:
          type: string
    InternalContact:
      type: object
      properties:
        id:
          type: string
          format: uuid
        owner:
          type: object
          properties:
            id:
              type: string
              format: uuid
        role:
          oneOf:
            - type: string
            - $ref: '#/components/schemas/RefData'
        user:
          type: string
          format: uuid
    Organisation:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        orgsUuid:
          type: string
          format: uuid
        orgsUuid_object:
          type: object
    File:
      type: object
      properties:
        id:
          type: string
          format: uuid
        contentType:
          type: string
        modified:
          type: string
          format: date-time
        name:
          type: string
        size:
          type: integer
    Document:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        dateCreated:
          type: string
          format: date-time
        lastUpdated:
          type: string
          format: date-time
        location:
          type: string
        url:
          type: string
          format: url
        note:
          type: string
        atType:
          oneOf:
            - type: string
            - $ref: '#/components/schemas/RefData'
        fileUpload:
          $ref: '#/components/schemas/File'
    LinkedAmendment:
      type: object
      properties:
        amendmentId:
          type: string
          format: uuid
        id:
          type: string
          format: uuid
        owner:
          type: string
          format: uuid
        status:
          oneOf:
            - type: string
            - $ref: '#/components/schemas/RefData'
    LinkedLicense:
      type: object
      properties:
        amendments:
          type: array
          items:
            $ref: '#/components/schemas/LinkedAmendment'
        id:
          type: string
          format: uuid
        owner:
          type: string
          format: uuid
        remoteId:
          type: string
          format: uuid
        remoteId_object:
          type: object
        status:
          oneOf:
            - type: string
            - $ref: '#/components/schemas/RefData'
    UsageDataProvider:
      type: object
    Tag:
      type: object
      properties:
        id:
          type: integer
        normValue:
          type: string
        value:
          type: string
    Agreement:
      type: object
      required:
        - id
        - name
        - status
        - period
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          maxLength: 255
          minLength: 1
        description:
          type: string
        status:
          oneOf:
            - type: string
            - $ref: '#/components/schemas/RefData'
        isPerpetual:
          oneOf:
            - type: string
            - $ref: '#/components/schemas/RefData'
        reasonForClosure:
          oneOf:
            - type: string
            - $ref: '#/components/schemas/RefData'
        renewalPriority:
          oneOf:
            - type: string
            - $ref: '#/components/schemas/RefData'
        alternateNames:
          type: array
          items:
            type: string
        periods:
          type: array
          items:
            type: object
            required:
              - startDate
            properties:
              startDate:
                type: string
                format: date
              endDate:
                type: string
                format: date
              cancellationDeadline:
                type: string
                format: date
              periodStatus:
                type: string
              note:
                type: string
              id:
                type: string
                format: uuid
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        cancellationDeadline:
          type: string
          format: date
        contacts:
          type: array
          items:
            $ref: '#/components/schemas/InternalContact'
        orgs:
          type: array
          items:
            $ref: '#/components/schemas/Organisation'
        externalLicenseDocs:
          type: array
          items:
            $ref: '#/components/schemas/Document'
        supplementaryDocs:
          type: array
          items:
            $ref: '#/components/schemas/Document'
        linkedLicenses:
          type: array
          items:
            $ref: '#/components/schemas/LinkedLicense'
        usageDataProviders:
          type: array
          items:
            $ref: '#/components/schemas/UsageDataProvider'
        tags:
          type: array
          items:
            $ref: '#/components/schemas/Tag'
    RefDataCategory:
      type: object
      properties:
        desc:
          type: string
        id:
          type: string
          format: uuid
        internal:
          type: boolean
        values:
          type: array
          items:
            $ref: '#/components/schemas/RefData'
    CustomProperty:
      type: object
      properties:
        defaultInternal:
          type: boolean
        description:
          type: string
        id:
          type: string
          format: uuid
        label:
          type: string
        name:
          type: string
        primary:
          type: boolean
        type:
          type: string
        weight:
          type: integer
        category:
          $ref: '#/components/schemas/RefDataCategory'
    CoverageStatement:
      type: object
      properties:
        id:
          type: string
          format: uuid
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        summary:
          type: string
        startVolume:
          type: string
        startIssue:
          type: string
        endVolume:
          type: string
        endIssue:
          type: string
    PurchaseOrderLine:
      type: object
      properties:
        id:
          type: string
          format: uuid
        owner:
          type: object
          properties:
            id:
              type: string
              format: uuid
        poLineId:
          type: string
          format: uuid
    ErmResource:
      type: object
      properties:
        id:
          type: string
          format: uuid
        class:
          type: string
        coverage:
          type: array
          items:
            $ref: '#/components/schemas/CoverageStatement'
        customCoverage:
          type: boolean
        dateCreated:
          type: string
          format: date-time
        lastUpdate:
          type: string
          format: date-time
        name:
          type: string
        publicationType:
          oneOf:
            - type: string
            - $ref: '#/components/schemas/RefData'
        suppressFromDiscovery:
          type: boolean
        subType:
          oneOf:
            - type: string
            - $ref: '#/components/schemas/RefData'
        tags:
          type: array
          items:
            $ref: '#/components/schemas/Tag'
        type:
          oneOf:
            - type: string
            - $ref: '#/components/schemas/RefData'
    Platform:
      type: object
      required:
        - name
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        dateCreated:
          type: string
          format: date
        lastUpdated:
          type: string
          format: date
        locators:
          type: array
          items:
            type: object
            properties:
              domainName:
                type: string
              id:
                type: string
                format: uuid
    Kb:
      type: object
      properties:
        activationEnabled:
          type: boolean
        active:
          type: boolean
        cursor:
          type: string
          format: date-time
        fullPrefix:
          type: string
        id:
          type: string
          format: uuid
        lastCheck:
          type: integer
        name:
          type: string
        readonly:
          type: boolean
        rectype:
          type: integer
        supportsHarvesting:
          type: boolean
        syncStatus:
          oneOf:
            - type: string
            - $ref: '#/components/schemas/RefData'
        trustedSourceTI:
          type: boolean
        type:
          type: string
        uri:
          type: string
          format: uri
    Package:
      type: object
      required:
        - name
        - source
        - reference
      allOf:
        - $ref: '#/components/schemas/ErmResource'
        - properties:
            nominalPlatform:
              $ref: '#/components/schemas/Platform'
            reference:
              type: string
            remoteKb:
              $ref: '#/components/schemas/Kb'
            source:
              type: string
            vendor:
              $ref: '#/components/schemas/Organisation'
    Identifier:
      type: object
      properties:
        ns:
          type: object
          properties:
            value:
              type: string
        value:
          type: string
    IdentifierOccurrence:
      type: object
      properties:
        title:
          type: object
          properties:
            id:
              type: string
              format: uuid
        identifier:
          $ref: '#/components/schemas/Identifier'
        status:
          $ref: '#/components/schemas/RefData'
    TitleInstance:
      type: object
      required:
        - name
      allOf:
        - $ref: '#/components/schemas/ErmResource'
        - properties:
            dateMonographPublished:
              type: string
              pattern: '^\d{4}(-((0[0-9])|(1[0-2]))(-(([0-2][0-9])|3[0-1]))?)?\$'
            firstAuthor:
              type: string
            firstEditor:
              type: string
            identifiers:
              type: array
              items:
                $ref: '#/components/schemas/IdentifierOccurrence'
            longName:
              type: string
            monographEdition:
              type: string
            monographVolume:
              type: string
            work:
              type: object
              properties:
                id:
                  type: string
                  format: uuid
            relatedTitles:
              type: array
              items:
                $ref: '#/components/schemas/TitleInstance'
    PlatformTitleInstance:
      type: object
      required:
        - platform
        - titleInstance
      allOf:
        - $ref: '#/components/schemas/ErmResource'
        - properties:
            longName:
              type: string
            platform:
              $ref: '#/components/schemas/Platform'
            titleInstance:
              $ref: '#/components/schemas/TitleInstance'
            url:
              type: string
              format: url
    PackageContentItem:
      type: object
      allOf:
        - $ref: '#/components/schemas/ErmResource'
        - properties:
            accessStart:
              type: string
              format: date
            addedTimestamp:
              type: integer
            depth:
              type: string
            lastSeenTimestamp:
              type: integer
            longName:
              type: string
            pkg:
              $ref: '#/components/schemas/Package'
            pti:
              $ref: '#/components/schemas/PlatformTitleInstance'
    EntitlementOption:
      allOf:
        - oneOf:
            - $ref: '#/components/schemas/PackageContentItem'
            - $ref: '#/components/schemas/Package'
        - type: object
          properties:
            _object:
              oneOf:
                - $ref: '#/components/schemas/TitleInstance'
                - $ref: '#/components/schemas/PlatformTitleInstance'
                - $ref: '#/components/schemas/PackageContentItem'
                - $ref: '#/components/schemas/Package'
              discriminator:
                propertyName: class
    Entitlement:
      type: object
      properties:
        id:
          type: string
          format: uuid
        activeFrom:
          type: string
          format: date
        activeTo:
          type: string
          format: date
        customCoverage:
          type: boolean
        coverage:
          type: array
          items:
            $ref: '#/components/schemas/CoverageStatement'
        explanation:
          type: string
        haveAccess:
          type: boolean
        note:
          type: string
        description:
          type: string
        owner:
          $ref: '#/components/schemas/Agreement'
        poLines:
          type: array
          items:
            $ref: '#/components/schemas/PurchaseOrderLine'
        resource:
          $ref: '#/components/schemas/EntitlementOption'
        suppressFromDiscovery:
          type: boolean
        tags:
          type: array
          items:
            $ref: '#/components/schemas/Tag'
    ComparisonPoint:
      type: object
      properties:
        titleList:
          type: string
          format: uuid
        date:
          type: string
          format: date-time
    Job:
      type: object
      properties:
        class:
          type: string
        comparisonPoints:
          type: array
          maxItems: 2
          minItems: 2
          items:
            $ref: '#/components/schemas/ComparisonPoint'
        dateCreated:
          type: integer
        errorLogCount:
          type: integer
        fileUpload:
          $ref: '#/components/schemas/File'
        fullLogCount:
          type: integer
        id:
          type: string
          format: uuid
        infoLogCount:
          type: integer
        name:
          type: string
        started:
          type: integer
        status:
          oneOf:
            - type: string
            - $ref: '#/components/schemas/RefData'
    LogEntry:
      type: object
      properties:
        additionalInfo:
          type: object
          properties:
            jobId:
              type: string
              format: uuid
            tenant:
              type: string
            tenantId:
              type: string
        dateCreated:
          type: integer
        id:
          type: string
          format: uuid
        message:
          type: string
        origin:
          type: string
          format: uuid
        type:
          type: string
    StringTemplate:
      type: object
      properties:
        id:
          type: string
          format: uuid
        dateCreated:
          type: integer
        rule:
          type: string
        context:
          oneOf:
            - type: string
            - $ref: '#/components/schemas/RefData'
        lastUpdated:
          type: string
          format: date
        name:
          type: string
        idScopes:
          type: array
          items:
            type: string
            format: uuid
    Entity:
      oneOf:
        - $ref: '#/components/schemas/Agreement'
        - $ref: '#/components/schemas/CustomProperty'
        - $ref: '#/components/schemas/Entitlement'
        - $ref: '#/components/schemas/EntitlementOption'
        - $ref: '#/components/schemas/ErmResource'
        - $ref: '#/components/schemas/InternalContact'
        - $ref: '#/components/schemas/Job'
        - $ref: '#/components/schemas/Kb'
        - $ref: '#/components/schemas/LogEntry'
        - $ref: '#/components/schemas/Organisation'
        - $ref: '#/components/schemas/Package'
        - $ref: '#/components/schemas/PackageContentItem'
        - $ref: '#/components/schemas/RefData'
        - $ref: '#/components/schemas/RefDataCategory'
        - $ref: '#/components/schemas/StringTemplate'
    ResultsArray:
      type: array
      items:
        $ref: '#/components/schemas/Entity'
    Results:
      type: object
      required:
        - results
      properties:
        results:
          $ref: '#/components/schemas/ResultsArray'
        meta:
          type: object
        page:
          type: integer
        pageSize:
          type: integer
        total:
          type: integer
        totalPages:
          type: integer
        totalRecords:
          type: integer
    ApplicationError:
      type: object
      properties:
        total:
          type: integer
        errors:
          type: array
          items:
            type: object
            properties:
              code:
                type: string
              i18n_code:
                type: string
              message:
                type: string
              object:
                type: string
    HttpError:
      type: object
      properties:
        message:
          type: string
        error:
          type: integer
    resourceInAgreementExport:
      type: object
      properties:
        agreementLine:
          $ref: '#/components/schemas/Entitlement'
        coverage:
          type: array
          items:
            $ref: '#/components/schemas/CoverageStatement'
        customCoverage:
          type: boolean
        depth:
          type: string
        package:
          $ref: '#/components/schemas/Package'
        platform:
          $ref: '#/components/schemas/Platform'
        suppressFromDiscovery:
          type: boolean
        tags:
          type: array
          items:
            $ref: '#/components/schemas/Tag'
        title:
          $ref: '#/components/schemas/TitleInstance'
        url:
          type: string
          format: url
    resourcesInAgreementExport:
      type: array
      items:
        $ref: '#/components/schemas/resourceInAgreementExport'
